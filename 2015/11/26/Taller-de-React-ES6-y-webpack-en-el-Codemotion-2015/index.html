<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Taller de React, ES6 y Webpack | </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" type="text/css" href="//cdn-static-1.medium.com/_/fp/css/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css" />
  <meta name="description" content="Antes de nada, a continuación tenéis el vídeo de la presentación para entender los principales conceptos que se tratan en esta guía y que se desarrolló en el Codemotion 2015.">
<meta property="og:type" content="article">
<meta property="og:title" content="Taller de React, ES6 y Webpack">
<meta property="og:url" content="http://programmeratwork.com/2015/11/26/Taller-de-React-ES6-y-webpack-en-el-Codemotion-2015/index.html">
<meta property="og:site_name">
<meta property="og:description" content="Antes de nada, a continuación tenéis el vídeo de la presentación para entender los principales conceptos que se tratan en esta guía y que se desarrolló en el Codemotion 2015.">
<meta property="og:locale" content="es_ES">
<meta property="article:published_time" content="2015-11-25T23:00:00.000Z">
<meta property="article:modified_time" content="2020-09-08T17:47:16.813Z">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="es6">
<meta property="article:tag" content="webpack">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@https:&#x2F;&#x2F;twitter.com&#x2F;programmeratwk">
  
    <link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-56922820-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo"></a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">inicio</a>
        
          <a class="main-nav-link" href="/cursos">cursos</a>
        
          <a class="main-nav-link" href="/archives">posts</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://www.youtube.com/channel/UC5Crb1lJ9giTnADcsZc0Z8w/videos">videos</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLl2j1YxD9uxOTF7XVVo-gb4n8-M02d2J5">charlas</a>
        
      </nav>
    </div>
  </div>
</header>

<div style="text-align:center; position:relative; top:-4.5rem;background-color:white;border-radius:9rem;width:9rem;margin:0 auto; margin-bottom:-6rem;">
  <a href="/"><img style="width:9rem;" src="/img/logo-original.png" /></a>
</div>

          
      <div class="outer">              
        <section id="main">
          <article id="post-Taller-de-React-ES6-y-webpack-en-el-Codemotion-2015" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/26/Taller-de-React-ES6-y-webpack-en-el-Codemotion-2015/" class="article-date">
  <time datetime="2015-11-25T23:00:00.000Z" itemprop="datePublished">26/11/2015</time>
</a>
    
  </div>
  <div class="article-inner">
    

    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Taller de React, ES6 y Webpack
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Antes de nada, a continuación tenéis el vídeo de la presentación para entender los principales conceptos que se tratan en esta guía y que se desarrolló en el <a target="_blank" rel="noopener" href="http://2015.codemotion.es/agenda.html#5677904553836544/48534003">Codemotion 2015</a>.</p>
<a id="more"></a>

<iframe width="420" height="315" src="https://www.youtube.com/embed/_oARNJqq1yE" frameborder="0" allowfullscreen></iframe>

<script async class="speakerdeck-embed" data-id="f0779710c7c94a839ab5462e2c137557" data-ratio="1.77777777777778" src="//speakerdeck.com/assets/embed.js"></script>

<h2 id="Puesta-en-marcha-del-entorno"><a href="#Puesta-en-marcha-del-entorno" class="headerlink" title="Puesta en marcha del entorno"></a>Puesta en marcha del entorno</h2><p>Como requisito antes de comenzar, es necesario tener instalado <a target="_blank" rel="noopener" href="https://nodejs.org/en/">NodeJS</a>. Para ello, recomendamos el uso de <a target="_blank" rel="noopener" href="https://github.com/creationix/nvm">NVM</a> (Node Version Manager), con el cual podemos instalar y utilizar varias versiones de <a target="_blank" rel="noopener" href="https://nodejs.org/en/">NodeJS</a> en nuestro entorno. </p>
<p><strong>NOTA:</strong> Tenéis más información de cómo funciona y algunos ejemplos de uso <a href="http://programmeratwork.com/blog/2015/07/24/gestion-eficiente-de-tus-instalaciones-de-nodejs/">en este artículo</a>.</p>
<p>En definitiva, si ya tenéis NVM instalado, sólo tenéis que ejecutar:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nvm install v5.0.0</span><br></pre></td></tr></table></figure>

<p>Con lo que al ejecutar los siguientes comandos, deberíais ver sin problemas las versiones correctas de <a target="_blank" rel="noopener" href="https://nodejs.org/en/">NodeJS</a> y <a target="_blank" rel="noopener" href="https://www.npmjs.com/">NPM</a>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">v5.0.0</span><br><span class="line"></span><br><span class="line">$ npm -v</span><br><span class="line">3.3.6</span><br></pre></td></tr></table></figure>

<h2 id="Creacion-del-proyecto-“weather”"><a href="#Creacion-del-proyecto-“weather”" class="headerlink" title="Creación del proyecto “weather”"></a>Creación del proyecto “weather”</h2><p>Nuestro objetivo en este taller va a ser migrar a React una aplicación desarrollada en jQuery que permite consultar el tiempo indicando una localidad o obteniendola de nuestra geolocalización. </p>
<p>El código original que vamos a migrar lo podéis descargar <a target="_blank" rel="noopener" href="https://github.com/borillo/codemotion-2015/tree/master/jquery">aquí</a>. Como la idea es partir de la aplicación jQuery e ir haciendo cambios poco a poco, descargad ya el ejemplo para tenerlo preparado.</p>
<p>Listos para comenzar!! Vamos pues a crear un directorio para el proyecto y le daremos el nombre de weather-react:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">    $ mkdir weather-react</span><br><span class="line">    $ <span class="built_in">cd</span> weather-react</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">Dentro del directorio del proyecto, inicializamos NPM para poder gestionar sus dependencias:</span><br><span class="line">    </span><br><span class="line">```bash    </span><br><span class="line">    $ npm init -y</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">Como vamos a ir modificando el proyecto original jQuery para ir haciendolo más <span class="string">&quot;React&quot;</span>, copiaremos todos los ficheros que habíamos descargado del proyecto original, dentro de este nuevo directorio (esto incluye los ficheros `index.html`, `weather.css` y `weather.js`).</span><br><span class="line"></span><br><span class="line"><span class="comment">## Integración con webpack</span></span><br><span class="line"></span><br><span class="line">Antes de migrar a React el proyecto, vamos primero a poner a punto nuestro workflow de trabajo con webpack. Para ello necesitamos instalarlo:</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">    $ npm install --global webpack</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">Si todo ha ido bien, deberíais poder ejecutar:</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">    $ webpack -h</span><br><span class="line">    webpack 1.12.4</span><br><span class="line">    Usage: https://webpack.github.io/docs/cli.html</span><br></pre></td></tr></table></figure>

<h3 id="Empaquetado-de-ficheros-JavaScript"><a href="#Empaquetado-de-ficheros-JavaScript" class="headerlink" title="Empaquetado de ficheros JavaScript"></a>Empaquetado de ficheros JavaScript</h3><p>Para comenzar a integrar nuestros ficheros JavaScript en la build, es necesario crear el fichero de configuración de webpack <code>webpack.config.js</code>. Partiremos de la configuración más simple posible:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./weather.js&#x27;</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">        path: __dirname</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Si ahora ejecutamos webpack, se generará el fichero de salida <code>bundle.js</code> con el resultado de empaquetar todos los recursos:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ webpack</span><br><span class="line">Hash: 298c1b69b8649145efa7</span><br><span class="line">Version: webpack 1.12.4</span><br><span class="line">Time: 71ms</span><br><span class="line">    Asset     Size  Chunks             Chunk Names</span><br><span class="line">bundle.js  6.47 kB       0  [emitted]  main</span><br><span class="line">   [0] ./weather.js 4.93 kB &#123;0&#125; [built]</span><br></pre></td></tr></table></figure>

<p>Ya sólo nos queda sustituir la siguiente linea en el <code>index.html</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;weather.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">```    </span><br><span class="line">    </span><br><span class="line">Por la del bundle generado por webpack:</span><br><span class="line"></span><br><span class="line">```html</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;bundle.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">```    </span><br><span class="line">    </span><br><span class="line">Si no hemos metido la pata, todo debería seguir funcionando de la misma forma :)</span><br><span class="line"></span><br><span class="line">Recuerda que si quieres generar la versión de producción del bundle, sólo debes ejecutar webpack con el siguiente flag:</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">    webpack -p</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">### Empaquetado de ficheros CSS</span><br><span class="line"></span><br><span class="line">Webpack permite empaquetar y gestionar múltiples recursos al margen de los de tipo JavaScript, ofreciendo soporte también para CSS, SASS o mucho muchos más.</span><br><span class="line"> </span><br><span class="line">Como en el proyecto ya tenemos nuestros estilos en un fichero CSS, vamos a incluir `weather.css` en la build. </span><br><span class="line"></span><br><span class="line">Para ello, debemos indicar a webpack que procese estos nuevos recursos modificando su fichero de configuración:</span><br><span class="line"> </span><br><span class="line">```javascript</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: &#x27;./weather.js&#x27;,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: &#x27;bundle.js&#x27;,</span><br><span class="line">        path: __dirname</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        loaders: [</span><br><span class="line">            &#123;</span><br><span class="line">                test: /\.css$/,</span><br><span class="line">                loader: &#x27;style!css&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Esta nueva definición require de que los loaders <code>style</code> y <code>css</code> sean instalados previamente mediante NPM:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    npm install --save-dev style-loader css-loader</span><br><span class="line">```    </span><br><span class="line">    </span><br><span class="line">Sólo nos queda pues modificar el fichero `weather.js`y hacer en su primera línea, un `require` del `weather.css`:</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">var styles = require(<span class="string">&#x27;./weather.css&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">var g, GLoc = &#123;</span><br><span class="line">    settings: &#123;</span><br><span class="line">       ...</span><br></pre></td></tr></table></figure>

<p>Para finalizar, ya podemos eliminar la linea del <code>index.html</code> donde se incluye el fichero de estilos al estar ya empaquetado en el <code>bundle.js</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span> <span class="attr">href</span>=<span class="string">&quot;weather.css&quot;</span>&gt;</span></span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">De nuevo, todo debería seguir funcionado.</span><br><span class="line"></span><br><span class="line"># Migrando a React</span><br><span class="line"></span><br><span class="line">## React con webpack</span><br><span class="line"></span><br><span class="line">Para poder comenzar a utilizar React en este proyecto, necesitamos que webpack sea capaz de procesar JSX (lenguaje con el que definiremos declarativamente las vistas en React). Esto se consigue, como en todos los casos previos, mediante la inclusión de un loader (`babel-loader` en este caso). Es importante tener en cuenta que gracias a este loader, vamos a tener acceso también a todas las novedades de ES6 (aka ES2015).</span><br><span class="line"></span><br><span class="line">Instalemos pues las dependencias de React en primer lugar:</span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">    npm install --save react react-dom</span><br></pre></td></tr></table></figure>

<p>Y posteriormente, los loaders que webpack necesitará para procesar el código React:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    npm install --save-dev babel-loader babel-preset-es2015 babel-preset-react</span><br><span class="line">```    </span><br><span class="line">    </span><br><span class="line">En este caso, también es necesaria una pequeña modificación del `webpack.config.js` para que estos nuevos loaders sean cargados:</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">module.exports = &#123;</span><br><span class="line">    entry: <span class="string">&#x27;./weather.js&#x27;</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        filename: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">        path: __dirname</span><br><span class="line">    &#125;,</span><br><span class="line">    module: &#123;</span><br><span class="line">        loaders: [</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="built_in">test</span>: /\.css$/,</span><br><span class="line">               loader: <span class="string">&#x27;style!css&#x27;</span></span><br><span class="line">           &#125;,</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="built_in">test</span>: /\.jsx?$/,</span><br><span class="line">               exclude: /node_modules/,</span><br><span class="line">               loader: <span class="string">&#x27;babel&#x27;</span>,</span><br><span class="line">               query: &#123;</span><br><span class="line">                   presets:[<span class="string">&#x27;es2015&#x27;</span>,<span class="string">&#x27;react&#x27;</span>]</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">       ]</span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">        extensions: [<span class="string">&quot;&quot;</span>, <span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.jsx&quot;</span>, <span class="string">&quot;.css&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Definicion-de-widgets"><a href="#Definicion-de-widgets" class="headerlink" title="Definición de widgets"></a>Definición de widgets</h2><p>La idea es ir migrando el código HTML/JS basado en jQuery a React de forma progresiva. Para ello vamos a definir un <code>div</code> que va a contener todo el código renderizado por React y que será incluido en el <code>index.html</code>:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;weather-background&quot;</span> <span class="attr">class</span>=<span class="string">&quot;default-weather&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Nuevo div para el output de react --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;react-output&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>En el <code>weather.js</code>, crearé mi primera clase React que va a representar la aplicación del tiempo y comprobaré que webpack no se queja al procesar estos nuevos elementos:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">&#x27;./weather.css&#x27;</span>;</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div/&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">WeatherApp</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;react-output&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>A partir de ahora, podemos dejar a webpack en modo <code>watch</code> para que vaya procesando los cambios y los podamos ir viendo al momento en el navegador:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">    webpack -w</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">Para iniciar la transformación, el primer paso será mover todo el marcado HTML que tenemos en `index.html` dentro del bloque etiquetado con el atributo `class=<span class="string">&quot;page-wrap&quot;</span>` al método render de Nuestra clase `WatherApp`:</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">class WeatherApp extends React.Component &#123;</span><br><span class="line">    <span class="function"><span class="title">render</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;header className=<span class="string">&quot;search-bar&quot;</span>&gt;</span><br><span class="line">                &lt;p className=<span class="string">&quot;search-text&quot;</span>&gt;</span><br><span class="line">                  &lt;span className=<span class="string">&quot;search-location-text&quot;</span>&gt;What<span class="string">&#x27;s the weather like in</span></span><br><span class="line"><span class="string">                    &lt;input id=&quot;search-location-input&quot; className=&quot;search-location-input&quot; type=&quot;text&quot; placeholder=&quot;City&quot; /&gt; ?</span></span><br><span class="line"><span class="string">                  &lt;/span&gt;</span></span><br><span class="line"><span class="string">                &lt;/p&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">                &lt;div className=&quot;search-location-button-group&quot;&gt;</span></span><br><span class="line"><span class="string">                  &lt;button id=&quot;search-location-button&quot;</span></span><br><span class="line"><span class="string">                          className=&quot;fa fa-search search-location-button search-button&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">                  &lt;button id=&quot;geo-button&quot; className=&quot;geo-button fa fa-location-arrow search-button&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;/header&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">              &lt;div id=&quot;front-page-description&quot; className=&quot;front-page-description middle&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;h1&gt;Blank Canvas Weather&lt;/h1&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;An Obligatory Weather App&lt;/h2&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">              &lt;div id=&quot;weather&quot; className=&quot;weather middle hide&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div className=&quot;location&quot; id=&quot;location&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;div className=&quot;weather-container&quot;&gt;</span></span><br><span class="line"><span class="string">                  &lt;div id=&quot;temperature-info&quot; className=&quot;temperature-info&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;div className=&quot;temperature&quot; id=&quot;temperature&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                    &lt;div className=&quot;weather-description&quot; id=&quot;weather-description&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                  &lt;/div&gt;</span></span><br><span class="line"><span class="string">                  &lt;div className=&quot;weather-box&quot;&gt;</span></span><br><span class="line"><span class="string">                    &lt;ul className=&quot;weather-info&quot; id=&quot;weather-info&quot;&gt;</span></span><br><span class="line"><span class="string">                      &lt;li className=&quot;weather-item humidity&quot;&gt;Humidity: &lt;span id=&quot;humidity&quot;&gt;&lt;/span&gt;%&lt;/li&gt;</span></span><br><span class="line"><span class="string">                      &lt;li className=&quot;weather-item wind&quot;&gt;</span></span><br><span class="line"><span class="string">                        Wind: &lt;span id=&quot;wind-direction&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                        &lt;span id=&quot;wind&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                        &lt;span id=&quot;speed-unit&quot;&gt;&lt;/span&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">                    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">                  &lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Como podemos comprobar, todo sigue funcionando despues de este cambio.</p>
<h2 id="Modularizacion"><a href="#Modularizacion" class="headerlink" title="Modularización"></a>Modularización</h2><p>Aunque ya tenemos todo el marcado en una vista React, vamos a intentar partir el ejemplo en componentes más pequeños para ir aislando su funcionalidad.</p>
<p>Este es el resultado de la modularización:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SearchBar</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;header className=<span class="string">&quot;search-bar&quot;</span>&gt;</span><br><span class="line">              &lt;p className=<span class="string">&quot;search-text&quot;</span>&gt;</span><br><span class="line">                &lt;span className=<span class="string">&quot;search-location-text&quot;</span>&gt;What<span class="string">&#x27;s the weather like in</span></span><br><span class="line"><span class="string">                &lt;input id=&quot;search-location-input&quot; </span></span><br><span class="line"><span class="string">                       className=&quot;search-location-input&quot; </span></span><br><span class="line"><span class="string">                       type=&quot;text&quot; placeholder=&quot;City&quot;/&gt; ?&lt;/span&gt;</span></span><br><span class="line"><span class="string">              &lt;/p&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">              &lt;div className=&quot;search-location-button-group&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;button id=&quot;search-location-button&quot;</span></span><br><span class="line"><span class="string">                        className=&quot;fa fa-search search-location-button search-button&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;button id=&quot;geo-button&quot; </span></span><br><span class="line"><span class="string">                        className=&quot;geo-button fa fa-location-arrow search-button&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">             &lt;/header&gt;</span></span><br><span class="line"><span class="string">        );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">class Wellcome extends React.Component &#123;</span></span><br><span class="line"><span class="string">    render() &#123;</span></span><br><span class="line"><span class="string">        return (</span></span><br><span class="line"><span class="string">            &lt;div id=&quot;front-page-description&quot; className=&quot;front-page-description middle&quot;&gt;</span></span><br><span class="line"><span class="string">              &lt;h1&gt;Blank Canvas Weather&lt;/h1&gt;</span></span><br><span class="line"><span class="string">              &lt;h2&gt;An Obligatory Weather App&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">        );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">class Info extends React.Component &#123;</span></span><br><span class="line"><span class="string">    render() &#123;</span></span><br><span class="line"><span class="string">        return (</span></span><br><span class="line"><span class="string">          &lt;div id=&quot;weather&quot; className=&quot;weather middle hide&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;div className=&quot;location&quot; id=&quot;location&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div className=&quot;weather-container&quot;&gt;</span></span><br><span class="line"><span class="string">              &lt;div id=&quot;temperature-info&quot; className=&quot;temperature-info&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;div className=&quot;temperature&quot; id=&quot;temperature&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">                &lt;div className=&quot;weather-description&quot; id=&quot;weather-description&quot;&gt;&lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">              &lt;div className=&quot;weather-box&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;ul className=&quot;weather-info&quot; id=&quot;weather-info&quot;&gt;</span></span><br><span class="line"><span class="string">                  &lt;li className=&quot;weather-item humidity&quot;&gt;Humidity: &lt;span id=&quot;humidity&quot;&gt;&lt;/span&gt;%&lt;/li&gt;</span></span><br><span class="line"><span class="string">                  &lt;li className=&quot;weather-item wind&quot;&gt;</span></span><br><span class="line"><span class="string">                    Wind: &lt;span id=&quot;wind-direction&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                    &lt;span id=&quot;wind&quot;&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">                    &lt;span id=&quot;speed-unit&quot;&gt;&lt;/span&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">                &lt;/ul&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">          &lt;/div&gt;</span></span><br><span class="line"><span class="string">      );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">class WeatherApp extends React.Component &#123;</span></span><br><span class="line"><span class="string">   render() &#123;</span></span><br><span class="line"><span class="string">       return (</span></span><br><span class="line"><span class="string">           &lt;div&gt;</span></span><br><span class="line"><span class="string">             &lt;SearchBar /&gt;</span></span><br><span class="line"><span class="string">             &lt;Wellcome /&gt;</span></span><br><span class="line"><span class="string">             &lt;Info /&gt;</span></span><br><span class="line"><span class="string">           &lt;/div&gt;</span></span><br><span class="line"><span class="string">       );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Por facilidad a la hora de seguir el ejemplo, vamos a dejar todo el código en el mismo fichero, pero la práctica habitual es separa los componentes en distintos ficheros e importarlos cuando sea necesario mediante <code>import</code>. Gracias a webpack, todo acabará siendo incluido en nuestro <code>bundle.js</code> de salida.</p>
<h3 id="Eventos"><a href="#Eventos" class="headerlink" title="Eventos"></a>Eventos</h3><p>Llegados a este punto, sigue siendo jQuery el que gestiona los eventos que se producen en la aplicación. Vamos pues a migrar esta parte a eventos gestionado por React.</p>
<p>Eventos que se producen en la aplicación:</p>
<ul>
<li><code>keypress</code> cuando escribimos el nombre de la ciudad a buscar (si es un enter, entonces se ejecuta la búsqueda).</li>
<li><code>click</code> en el botón de buscar.</li>
<li><code>click</code> en el botón de geolocalización.</li>
</ul>
<p>Vamos a comenzar por el primero y vamos a hacernos cargo de la gestión del evento de <code>keypress</code>. Pare ello deberemos borrar el código jQuery que se ocupa de actuar sobre este evento y modifcar la clase <code>SearchBar</code> para tratar este evento, recuperar los datos del tiempo y enviar el resultado a <code>WeatherApp</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> API_TOKEN = <span class="string">&quot;0596fe0573fa9daa94c2912e5e383ed3&quot;</span>;</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SearchBar</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    selectLocation(event) &#123;</span><br><span class="line">        <span class="keyword">if</span> (event.keyCode !== <span class="number">13</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">this</span>.showWeather();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    showWeather() &#123;</span><br><span class="line">        <span class="keyword">let</span> location = <span class="built_in">this</span>.refs[<span class="string">&quot;search-location-input&quot;</span>].value;</span><br><span class="line">        <span class="keyword">let</span> url= <span class="string">`http://api.openweathermap.org/data/2.5/weather?q=<span class="subst">$&#123;location&#125;</span>&amp;appid=<span class="subst">$&#123;API_TOKEN&#125;</span>`</span>;</span><br><span class="line">    </span><br><span class="line">        $.getJSON(url, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.props.onData(data);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;header className=<span class="string">&quot;search-bar&quot;</span>&gt;</span><br><span class="line">              &lt;p className=<span class="string">&quot;search-text&quot;</span>&gt;</span><br><span class="line">                &lt;span className=<span class="string">&quot;search-location-text&quot;</span>&gt;What<span class="string">&#x27;s the weather like in</span></span><br><span class="line"><span class="string">                  &lt;input id=&quot;search-location-input&quot;</span></span><br><span class="line"><span class="string">                         ref=&quot;search-location-input&quot;</span></span><br><span class="line"><span class="string">                         className=&quot;search-location-input&quot; type=&quot;text&quot;</span></span><br><span class="line"><span class="string">                         placeholder=&quot;City&quot;</span></span><br><span class="line"><span class="string">                         onKeyDown=&#123;this.selectLocation.bind(this)&#125; /&gt; ?</span></span><br><span class="line"><span class="string">                &lt;/span&gt;</span></span><br><span class="line"><span class="string">              &lt;/p&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">              &lt;div className=&quot;search-location-button-group&quot;&gt;</span></span><br><span class="line"><span class="string">                &lt;button id=&quot;search-location-button&quot;</span></span><br><span class="line"><span class="string">                        className=&quot;fa fa-search search-location-button search-button&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;button id=&quot;geo-button&quot; className=&quot;geo-button fa fa-location-arrow search-button&quot;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">              &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;/header&gt;</span></span><br><span class="line"><span class="string">        );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<p>Quedando <code>WeatherApp</code> de la siguiente forma:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    showWeatherData(data) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;SearchBar onData=&#123;<span class="built_in">this</span>.showWeatherData&#125; /&gt;</span><br><span class="line">              &lt;Wellcome /&gt;</span><br><span class="line">              &lt;Info /&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ahora que tenemos el evento controlado, vamos a ocultar el mensaje de bienvenida y mostrar el bloque de info del tiempo. Para ello haremos uso de la gestión del estado de los componentes en React y modificaremos <code>WeatherApp</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = &#123; <span class="attr">ready</span> : <span class="literal">false</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">       </span><br><span class="line">    showWeatherData(data) &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123; <span class="attr">ready</span> : <span class="literal">true</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;SearchBar onData=&#123;<span class="built_in">this</span>.showWeatherData.bind(<span class="built_in">this</span>)&#125; /&gt;</span><br><span class="line">              &#123; (<span class="built_in">this</span>.state.ready) ? <span class="xml"><span class="tag">&lt;<span class="name">Info</span> <span class="attr">ref</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">Wellcome</span> /&gt;</span></span> &#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Como podemos ver, el panel cambia, pero la info del tiempo no se muestra. Vayamos pues a completar esta parte!!</p>
<p>Para que la información correcta se muestre, añadiremos un nuevo método al componente <code>Info</code> para que se pueda realizar la carga y lo invocaremos desde <code>WeatherApp</code>. Podemos ver como otros métodos de cálculo son necesarios en <code>Info</code>, pero no son más que una copia del<br>código jQuery que ya teníamos:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Info</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">    </span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            loaded: <span class="literal">false</span>,</span><br><span class="line">            location: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            humidity: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            description: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            temperature: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            windSpeed: <span class="number">0</span>,</span><br><span class="line">            windDegree: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            windDirection: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    loadWeatherData(data) &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">            loaded: <span class="literal">true</span>,</span><br><span class="line">            location: data.name + <span class="string">&#x27;, &#x27;</span> + data.sys.country,</span><br><span class="line">            humidity: data.main.humidity,</span><br><span class="line">            description: data.weather[<span class="number">0</span>].description,</span><br><span class="line">            windDirection: <span class="built_in">this</span>.getWindDirection(data.wind.deg),</span><br><span class="line">            temperature: <span class="built_in">Math</span>.round(data.main.temp - <span class="number">273.15</span>),</span><br><span class="line">            windSpeed: <span class="built_in">Math</span>.round(data.wind.speed * <span class="number">3.6</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    getWindDirection(degree) &#123;</span><br><span class="line">        <span class="keyword">if</span> (degree &gt; <span class="number">337.5</span> || degree &lt;= <span class="number">22.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;N&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">22.5</span> &lt; degree &lt;= <span class="number">67.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;NE&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">67.5</span> &lt; degree &lt;= <span class="number">112.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;E&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">112.5</span> &lt; degree &lt;= <span class="number">157.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;SE&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">157.5</span> &lt; degree &lt;= <span class="number">202.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;S&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">202.5</span> &lt; degree &lt;= <span class="number">247.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;SW&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">247.5</span> &lt; degree &lt;= <span class="number">292.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;W&#x27;</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="number">292.5</span> &lt; degree &lt;= <span class="number">337.5</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&#x27;NW&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div id=<span class="string">&quot;weather&quot;</span> className=<span class="string">&quot;weather middle&quot;</span> style=&#123;styles.info&#125;&gt;</span><br><span class="line">              &lt;div className=<span class="string">&quot;location&quot;</span> id=<span class="string">&quot;location&quot;</span>&gt;&#123;<span class="built_in">this</span>.state.location&#125;&lt;/div&gt;</span><br><span class="line">    </span><br><span class="line">              &lt;div className=<span class="string">&quot;weather-container&quot;</span>&gt;</span><br><span class="line">                &lt;div id=<span class="string">&quot;temperature-info&quot;</span> className=<span class="string">&quot;temperature-info&quot;</span>&gt;</span><br><span class="line">                  &lt;div className=<span class="string">&quot;temperature&quot;</span> id=<span class="string">&quot;temperature&quot;</span>&gt;&#123;<span class="built_in">this</span>.state.temperature&#125;&lt;/div&gt;</span><br><span class="line">                  &lt;div className=<span class="string">&quot;weather-description&quot;</span> id=<span class="string">&quot;weather-description&quot;</span>&gt;&#123;<span class="built_in">this</span>.state.description&#125;&lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;div className=<span class="string">&quot;weather-box&quot;</span>&gt;</span><br><span class="line">                  &lt;ul className=<span class="string">&quot;weather-info&quot;</span> id=<span class="string">&quot;weather-info&quot;</span>&gt;</span><br><span class="line">                    &lt;li className=<span class="string">&quot;weather-item humidity&quot;</span>&gt;Humidity: <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;humidity&quot;</span>&gt;</span>&#123;this.state.humidity&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>%&lt;/li&gt;</span><br><span class="line">                    &lt;li className=<span class="string">&quot;weather-item wind&quot;</span>&gt;</span><br><span class="line">                      Wind: <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;wind-direction&quot;</span>&gt;</span>&#123;this.state.windDirection&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;wind&quot;</span>&gt;</span>&#123;this.state.windSpeed&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> <span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;speed-unit&quot;</span>&gt;</span>&#123;this.state.speedUnit&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">                    &lt;/li&gt;</span><br><span class="line">                  &lt;/ul&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">              &lt;/div&gt;</span><br><span class="line">             &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherApp</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = &#123; <span class="attr">ready</span> : <span class="literal">false</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    showWeatherData(data) &#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123; <span class="attr">ready</span> : <span class="literal">true</span> &#125;);</span><br><span class="line">        <span class="built_in">this</span>.refs[<span class="string">&quot;info&quot;</span>].loadWeatherData(data);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">              &lt;SearchBar onData=&#123;<span class="built_in">this</span>.showWeatherData.bind(<span class="built_in">this</span>)&#125; /&gt;</span><br><span class="line">              &#123; (<span class="built_in">this</span>.state.ready) ? <span class="xml"><span class="tag">&lt;<span class="name">Info</span> <span class="attr">ref</span>=<span class="string">&quot;info&quot;</span> /&gt;</span></span> : <span class="xml"><span class="tag">&lt;<span class="name">Wellcome</span> /&gt;</span></span> &#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Ya sólo nos queda que pueda funcionar el botón de buscar y el de geoposicionar:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SearchBar</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    selectLocation(event) &#123;</span><br><span class="line">        <span class="keyword">if</span> (event.keyCode !== <span class="number">13</span>) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">this</span>.showWeather();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    selectCurrentLocation() &#123;</span><br><span class="line">        navigator.geolocation.getCurrentPosition(<span class="function">(<span class="params">position</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.showWeatherByLatitude(position.coords.longitude, position.coords.latitude);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    showWeather() &#123;</span><br><span class="line">        <span class="keyword">let</span> location = <span class="built_in">this</span>.refs[<span class="string">&quot;search-location-input&quot;</span>].value;</span><br><span class="line">        <span class="keyword">let</span> url= <span class="string">`http://api.openweathermap.org/data/2.5/weather?q=<span class="subst">$&#123;location&#125;</span>&amp;appid=<span class="subst">$&#123;API_TOKEN&#125;</span>`</span>;</span><br><span class="line">    </span><br><span class="line">        $.getJSON(url, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.props.onData(data);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    showWeatherByLatitude(longitude, latitude) &#123;</span><br><span class="line">        <span class="keyword">let</span> url= <span class="string">`http://api.openweathermap.org/data/2.5/weather?lat=<span class="subst">$&#123;latitude&#125;</span>&amp;lon=<span class="subst">$&#123;longitude&#125;</span>&amp;appid=<span class="subst">$&#123;API_TOKEN&#125;</span>`</span>;</span><br><span class="line">    </span><br><span class="line">        $.getJSON(url, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.props.onData(data);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">             &lt;header className=<span class="string">&quot;search-bar&quot;</span>&gt;</span><br><span class="line">               &lt;p className=<span class="string">&quot;search-text&quot;</span>&gt;</span><br><span class="line">                 &lt;span className=<span class="string">&quot;search-location-text&quot;</span>&gt;What<span class="string">&#x27;s the weather like in</span></span><br><span class="line"><span class="string">                   &lt;input id=&quot;search-location-input&quot;</span></span><br><span class="line"><span class="string">                          ref=&quot;search-location-input&quot;</span></span><br><span class="line"><span class="string">                          className=&quot;search-location-input&quot; type=&quot;text&quot;</span></span><br><span class="line"><span class="string">                          placeholder=&quot;City&quot;</span></span><br><span class="line"><span class="string">                          onKeyDown=&#123;this.selectLocation.bind(this)&#125; /&gt; ?</span></span><br><span class="line"><span class="string">                 &lt;/span&gt;</span></span><br><span class="line"><span class="string">               &lt;/p&gt;</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">               &lt;div className=&quot;search-location-button-group&quot;&gt;</span></span><br><span class="line"><span class="string">                 &lt;button id=&quot;search-location-button&quot;</span></span><br><span class="line"><span class="string">                         className=&quot;fa fa-search search-location-button search-button&quot;</span></span><br><span class="line"><span class="string">                         onClick=&#123;this.showWeather.bind(this)&#125;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">                 &lt;button id=&quot;geo-button&quot;</span></span><br><span class="line"><span class="string">                         className=&quot;geo-button fa fa-location-arrow search-button&quot;</span></span><br><span class="line"><span class="string">                         onClick=&#123;this.selectCurrentLocation.bind(this)&#125;&gt;&lt;/button&gt;</span></span><br><span class="line"><span class="string">               &lt;/div&gt;</span></span><br><span class="line"><span class="string">             &lt;/header&gt;</span></span><br><span class="line"><span class="string">        );</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="Wrap-up-y-algunas-mejoras"><a href="#Wrap-up-y-algunas-mejoras" class="headerlink" title="Wrap-up y algunas mejoras"></a>Wrap-up y algunas mejoras</h3><p>Con todo el marcado migrado, los componentes React extraidos y los eventos definidos, ya sólo nos queda borrar todo el código jQuery de <code>weather.js</code> y comprobar que la aplicación sigue siendo funcional.</p>
<p><strong>NOTA:</strong> Si has llegado hasta aquí y algo no te funciona, revisa tu código comparándolo con el que he publicado en <a target="_blank" rel="noopener" href="https://github.com/borillo/codemotion-2015">el repo de la charla en Github</a>.</p>
<p>A partir de aquí, si queremos prescindir totalmente de jQuery, podemos usar <code>fetch</code> para realizar las peticiones AJAX al servicio del tiempo que se usa en la aplicación. Como <a target="_blank" rel="noopener" href="http://caniuse.com/#search=fetch">fetch aún no está implementado en todos los navegadores</a>, podemos usar una librería externa que actua como polyfill. En nuestro caso vamos a utilizar <code>isomorphic-fetch</code> porque podemos usarla tanto en cliente como en servidor con NodeJS y soporta promesas ES6.</p>
<p>Para ello, instalamos como siempre las dependencias necesarias:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">    npm install --save isomorphic-fetch es6-promise</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">Y sustituiremos la parte de `$.getJSON` que obtiene los datos en JSON mediante jQuery, por la parte de `fetch`:</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">import es6promise from <span class="string">&#x27;es6-promise&#x27;</span>;</span><br><span class="line">import fetch from <span class="string">&#x27;isomorphic-fetch&#x27;</span>;</span><br><span class="line">es6promise.polyfill();</span><br><span class="line">    </span><br><span class="line">const API_TOKEN = <span class="string">&quot;0596fe0573fa9daa94c2912e5e383ed3&quot;</span>;</span><br><span class="line">    </span><br><span class="line">class SearchBar extends React.Component &#123;</span><br><span class="line">       </span><br><span class="line">    ...</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="title">showWeather</span></span>() &#123;</span><br><span class="line">        <span class="built_in">let</span> location = this.refs[<span class="string">&quot;search-location-input&quot;</span>].value;</span><br><span class="line">        <span class="built_in">let</span> url = `http://api.openweathermap.org/data/2.5/weather?q=<span class="variable">$&#123;location&#125;</span>&amp;appid=<span class="variable">$&#123;API_TOKEN&#125;</span>`;</span><br><span class="line">    </span><br><span class="line">        fetch(url)</span><br><span class="line">            .<span class="keyword">then</span>(<span class="keyword">function</span> (response) &#123;</span><br><span class="line">                <span class="built_in">return</span> response.json();</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="keyword">then</span>((data) =&gt; &#123;</span><br><span class="line">                this.props.onData(data);</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    showWeatherByLatitude(longitude, latitude) &#123;</span><br><span class="line">        <span class="built_in">let</span> url = `http://api.openweathermap.org/data/2.5/weather?lat=<span class="variable">$&#123;latitude&#125;</span>&amp;lon=<span class="variable">$&#123;longitude&#125;</span>&amp;appid=<span class="variable">$&#123;API_TOKEN&#125;</span>`;</span><br><span class="line">    </span><br><span class="line">        fetch(url)</span><br><span class="line">            .<span class="keyword">then</span>(<span class="keyword">function</span> (response) &#123;</span><br><span class="line">                <span class="built_in">return</span> response.json();</span><br><span class="line">            &#125;)</span><br><span class="line">            .<span class="keyword">then</span>((data) =&gt; &#123;</span><br><span class="line">                this.props.onData(data);</span><br><span class="line">            &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="title">render</span></span>() &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Si hemos integrado <code>fetch</code> en la aplicación, ya podemos quitar tranquilamente la dependencia de jQuery del <code>index.html</code> y seguir funcionando con normalidad.</p>

      
    </div>
    <footer class="article-footer">
      <img class="article-author-avatar" src="/img/borillo.jpg" />    
      <a target="_blank" rel="noopener" href="https://twitter.com/borillo" class="article-author-name">Ricardo Borillo</a>      
      <span class="article-author-separator">&nbsp;</span>

      <a data-url="http://programmeratwork.com/2015/11/26/Taller-de-React-ES6-y-webpack-en-el-Codemotion-2015/" data-id="ckkr0n9z2003phw9rc0s8cqnv" class="article-share-link">Comparte</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/09/05/Manten-actualizadas-las-dependencias-de-tu-proyecto-JavaScript-con-npm-check-updates/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Siguiente</strong>
      <div class="article-nav-title">
        
          Mantén actualizadas las dependencias de tu proyecto JavaScript con npm-check-updates
        
      </div>
    </a>
  
  
    <a href="/2015/07/24/Gestion-eficiente-de-tus-instalaciones-de-NodeJS/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Anterior</strong>
      <div class="article-nav-title">Gestión eficiente de tus instalaciones de NodeJS</div>
    </a>
  
</nav>

  
</article>


        </section>

        
      </div>

      <div>
          <div class="banner">
          </div>
      </div>

      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget inline">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/agile/" rel="tag">agile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/" rel="tag">aws</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/" rel="tag">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/craftmanship/" rel="tag">craftmanship</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cursos/" rel="tag">cursos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/" rel="tag">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventos/" rel="tag">eventos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/" rel="tag">gulp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haskell/" rel="tag">haskell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/languages/" rel="tag">languages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/learn/" rel="tag">learn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mindset/" rel="tag">mindset</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/" rel="tag">mobile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvm/" rel="tag">nvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/programming/" rel="tag">programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sofware/" rel="tag">sofware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/" rel="tag">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/" rel="tag">testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archivo</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">febrero 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">enero 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">septiembre 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">julio 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">diciembre 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">noviembre 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">junio 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">mayo 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">septiembre 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">noviembre 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">julio 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">febrero 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">diciembre 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">noviembre 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recientes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/02/05/Por-que-testeamos-Entrega-sostenible-de-valor/">¿Por qué testeamos? Entrega sostenible de valor</a>
          </li>
        
          <li>
            <a href="/2021/01/05/Implementando-una-cultura-de-testing-Evaluando-el-contexto/">Implementando una cultura de testing: Evaluando el contexto</a>
          </li>
        
          <li>
            <a href="/2020/09/08/Aprediendo-Haskell-Iniciando-el-camino/">Aprediendo Haskell: Iniciando el camino</a>
          </li>
        
          <li>
            <a href="/2019/07/17/Aprendiendo-a-fijar-los-conocimientos/">Aprendiendo a fijar los conocimientos adquiridos</a>
          </li>
        
          <li>
            <a href="/2019/07/02/Pamplona-Software-Crafters-Aprendiendo-a-aprender/">Pamplona Software Crafters: Aprendiendo a aprender</a>
          </li>
        
      </ul>
    </div>
  </div>

  

   
    <!--
    <div>
      <ul class="small-block-grid-2 medium-block-grid-4">
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://devscola.org">
            <img src="/img/devscola.jpg" style="width:7em;" />
          </a>
        </li>
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://agileatwork.es">
            <img src="/img/agileatwork.png" style="width:19em;" />
          </a>
        </li>
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://cursohtml5js.com">
            <img src="/img/html5js.png" style="width:8em;" />
          </a>
        </li>
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://decharlas.com">
            <img src="/img/decharlas.png" style="width:9em;" />
          </a>
        </li>
      </ul>
    </div>
    -->
</aside>
  
</footer>
    </div>
        
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">inicio</a>
  
    <a href="/cursos" class="mobile-nav-link">cursos</a>
  
    <a href="/archives" class="mobile-nav-link">posts</a>
  
    <a target="_blank" rel="noopener" href="https://www.youtube.com/channel/UC5Crb1lJ9giTnADcsZc0Z8w/videos" class="mobile-nav-link">videos</a>
  
    <a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLl2j1YxD9uxOTF7XVVo-gb4n8-M02d2J5" class="mobile-nav-link">charlas</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>