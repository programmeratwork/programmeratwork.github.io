<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Construcción efectiva con Gulp: Parte 1 | </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" type="text/css" href="//cdn-static-1.medium.com/_/fp/css/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css" />
  <meta name="description" content="Esta es una serie de tres artículos sobre el uso de Gulp en los que nos centraremos en los aspectos básicos de su funcionamiento, en los plugins más interesantes para mejorar nuestro flujo de trabajo">
<meta property="og:type" content="article">
<meta property="og:title" content="Construcción efectiva con Gulp: Parte 1">
<meta property="og:url" content="http://programmeratwork.com/2014/11/13/Construccion-efectiva-en-JavaScript-con-Gulp-Parte-1/index.html">
<meta property="og:site_name">
<meta property="og:description" content="Esta es una serie de tres artículos sobre el uso de Gulp en los que nos centraremos en los aspectos básicos de su funcionamiento, en los plugins más interesantes para mejorar nuestro flujo de trabajo">
<meta property="og:locale" content="es_ES">
<meta property="og:image" content="http://www.smashingmagazine.com/wp-content/uploads/2014/06/02-steams-2-opt.png">
<meta property="article:published_time" content="2014-11-12T23:00:00.000Z">
<meta property="article:modified_time" content="2020-09-08T17:47:16.813Z">
<meta property="article:tag" content="javascript">
<meta property="article:tag" content="gulp">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.smashingmagazine.com/wp-content/uploads/2014/06/02-steams-2-opt.png">
<meta name="twitter:creator" content="@https:&#x2F;&#x2F;twitter.com&#x2F;programmeratwk">
  
    <link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-56922820-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


<meta name="generator" content="Hexo 5.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo"></a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/">inicio</a>
        
          <a class="main-nav-link" href="/cursos">cursos</a>
        
          <a class="main-nav-link" href="/archives">posts</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://www.youtube.com/channel/UC5Crb1lJ9giTnADcsZc0Z8w/videos">videos</a>
        
          <a class="main-nav-link" target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLl2j1YxD9uxOTF7XVVo-gb4n8-M02d2J5">charlas</a>
        
      </nav>
    </div>
  </div>
</header>

<div style="text-align:center; position:relative; top:-4.5rem;background-color:white;border-radius:9rem;width:9rem;margin:0 auto; margin-bottom:-6rem;">
  <a href="/"><img style="width:9rem;" src="/img/logo-original.png" /></a>
</div>

          
      <div class="outer">              
        <section id="main">
          <article id="post-Construccion-efectiva-en-JavaScript-con-Gulp-Parte-1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/11/13/Construccion-efectiva-en-JavaScript-con-Gulp-Parte-1/" class="article-date">
  <time datetime="2014-11-12T23:00:00.000Z" itemprop="datePublished">13/11/2014</time>
</a>
    
  </div>
  <div class="article-inner">
    

    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Construcción efectiva con Gulp: Parte 1
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Esta es una serie de tres artículos sobre el uso de <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> en los que nos centraremos en los aspectos básicos de su funcionamiento, en los <a href="/2014/11/22/Construccion-efectiva-en-JavaScript-con-Gulp-Parte-2/">plugins más interesantes para mejorar nuestro flujo de trabajo</a> y en <a href="/2014/12/09/Construccion-efectiva-en-JavaScript-con-Gulp-Parte-3/">otros aspectos avanzados</a>.</p>
<a id="more"></a>

<h2 id="Introduccion-y-caracteristicas-principales"><a href="#Introduccion-y-caracteristicas-principales" class="headerlink" title="Introducción y características principales"></a>Introducción y características principales</h2><p><a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> es un sistema de construcción de aplicaciones web cuya principal característica es su capacidad de encadenar flujos de tareas a modo de pipeline y de favorecer la definición de las tareas a realizar a través de código en lugar de en base a configuración.</p>
<p>Creado con posterioridad a <a target="_blank" rel="noopener" href="https://github.com/jakejs/jake">Jake</a> y a <a target="_blank" rel="noopener" href="http://gruntjs.com/">Grunt</a>, ha supuesto una revolución por su rendimiento, claridad y facilidad de configuración.</p>
<p>Grunt se convirtió en una opción muy popular en 2013 a la hora de automatizar nuestro flujo de trabajo en el desarrollo de aplicaciones web. En la actualidad sigue siendo muy utilizado y dispone de miles de extensiones, aspecto muy importante cuando buscamos documentación y soluciones a un problema concreto.</p>
<p>En lugar de contar con una sección de configuración como <a target="_blank" rel="noopener" href="http://gruntjs.com/">Grunt</a>, <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> permite definir las tareas a realizar de una forma más programática, centralizando en un mismo sitio la definición de las tareas a realizar, con los valores de configuración que estas necesitan.</p>
<p>Por otra parte, <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> utiliza de forma intensiva el <a target="_blank" rel="noopener" href="http://nodejs.org/api/stream.html">API de Streams de NodeJS</a>, con lo que hace un uso mucho menor del disco duro y aumenta su rendimiento de ejecución de tareas de una forma sustancial.</p>
<p>Este funcionamiento se ve reflejado en como se encadenan transformaciones dentro de una tarea con la función <code>pipe</code>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&#x27;js&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> gulp.src(<span class="string">&#x27;js/*.js&#x27;</span>)</span><br><span class="line">      .pipe(jshint())</span><br><span class="line">      .pipe(jshint.reporter(<span class="string">&#x27;default&#x27;</span>))</span><br><span class="line">      .pipe(uglify())</span><br><span class="line">      .pipe(concat(<span class="string">&#x27;app.js&#x27;</span>))</span><br><span class="line">      .pipe(gulp.dest(<span class="string">&#x27;build&#x27;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>El cual sigue este esquema de procesamiento en memoria:</p>
<p>{&lt;1&gt;}<img src="http://www.smashingmagazine.com/wp-content/uploads/2014/06/02-steams-2-opt.png" alt="pipeline"></p>
<p><em>[Para más información acerca de los streams en NodeJS, podéis consultar el <a target="_blank" rel="noopener" href="https://github.com/substack/stream-handbook">Stream Handbook</a>.]</em></p>
<p>Finalmente, <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> permite extender su funcionalidad mediante plugins con un API realmente sencilla. Por todo esto y mucho más, <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> está siendo adoptada por multitud de proyectos entre los que podemos destacar <a target="_blank" rel="noopener" href="https://developers.google.com/web/starter-kit/">Google Web Starter Kit</a>.</p>
<p>Con el fin de poder ir viendo las diferencias, vamos a comparar como Grunt y <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> son capaces de aplicar un pre-procesador CSS como LESS y pasar su output por <a target="_blank" rel="noopener" href="https://github.com/ai/autoprefixer">Autoprefixer</a> para añadir los <a target="_blank" rel="noopener" href="http://davidwalsh.name/vendor-prefixes">“vendor prefixes”</a> al CSS resultante.</p>
<p>Esta tarea en Grunt quedaría de la siguiente forma:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">grunt.initConfig(&#123;</span><br><span class="line">   less: &#123;</span><br><span class="line">      development: &#123;</span><br><span class="line">         files: &#123;</span><br><span class="line">            <span class="string">&quot;build/tmp/app.css&quot;</span>: <span class="string">&quot;assets/app.less&quot;</span></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;,       </span><br><span class="line">   autoprefixer: &#123;</span><br><span class="line">      options: &#123;</span><br><span class="line">         browsers: [<span class="string">&#x27;last 2 version&#x27;</span>, <span class="string">&#x27;ie 8&#x27;</span>, <span class="string">&#x27;ie 9&#x27;</span>]</span><br><span class="line">      &#125;,</span><br><span class="line">      multiple_files: &#123;</span><br><span class="line">         expand: <span class="literal">true</span>,</span><br><span class="line">         flatten: <span class="literal">true</span>,</span><br><span class="line">         src: <span class="string">&#x27;build/tmp/app.css&#x27;</span>,</span><br><span class="line">         dest: <span class="string">&#x27;build/&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br><span class="line">  </span><br><span class="line">grunt.loadNpmTasks(<span class="string">&#x27;grunt-contrib-less&#x27;</span>);</span><br><span class="line">grunt.loadNpmTasks(<span class="string">&#x27;grunt-autoprefixer&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">grunt.registerTask(<span class="string">&#x27;css&#x27;</span>, [<span class="string">&#x27;less&#x27;</span>, <span class="string">&#x27;autoprefixer&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<p>Siendo así su correspondiente versión en <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a>:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>),</span><br><span class="line">    less = <span class="built_in">require</span>(<span class="string">&#x27;gulp-less&#x27;</span>),</span><br><span class="line">    autoprefix = <span class="built_in">require</span>(<span class="string">&#x27;gulp-autoprefixer&#x27;</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;css&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   gulp.src(<span class="string">&#x27;assets/app.less&#x27;</span>)</span><br><span class="line">      .pipe(less())</span><br><span class="line">      .pipe(autoprefix(<span class="string">&#x27;last 2 version&#x27;</span>, <span class="string">&#x27;ie 8&#x27;</span>, <span class="string">&#x27;ie 9&#x27;</span>))</span><br><span class="line">      .pipe(gulp.dest(<span class="string">&#x27;build&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="string">``</span><span class="string">` </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Sencillo, ¿no? :)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Así pues, si prefieres especificar tus ficheros de construcción con código en lugar de utilizar estructuras JSON complejas para configurar tus tareas, [Gulp](http://gulpjs.com/) puede ser tu sistema de construcción. </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Vamos pués a ver como instalarlo y ponernos manos a la obra.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## Instalación</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Para poder utilizar [Gulp](http://gulpjs.com/), la única dependencia a instalar es la de NodeJS y Npm. Podemos comprobar si tenemos correctamente instaladas estas herramientas mediante los siguientes comandos:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>bash</span><br><span class="line">$ node -v</span><br><span class="line">v0<span class="number">.10</span><span class="number">.29</span></span><br><span class="line"></span><br><span class="line">$ npm -v</span><br><span class="line"><span class="number">1.4</span><span class="number">.14</span></span><br></pre></td></tr></table></figure>

<p><em>(En caso de no tener instalado node, recomendamos su instalación mediante <a target="_blank" rel="noopener" href="https://github.com/creationix/nvm">NVM (Node Version Manager)</a>, el cual permite tener instaladas varias versiones de NodeJS y configurarlas de forma sencilla).</em></p>
<p>Una vez instalado NodeJS y Npm, ya podemos instalar <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> mediante el siguiente comando:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g gulp</span><br></pre></td></tr></table></figure>

<p>De esta forma, tendremos el comando disponible de forma general en el sistema y no sólo para el proyecto actual.</p>
<p>Una vez concluida la instalación, configuraremos un proyecto de ejemplo y comenzaremos a explorar las funcionalidad que ofrece esta herramienta de construcción.</p>
<h2 id="Creacion-de-un-proyecto-de-ejemplo"><a href="#Creacion-de-un-proyecto-de-ejemplo" class="headerlink" title="Creación de un proyecto de ejemplo"></a>Creación de un proyecto de ejemplo</h2><p>Para comenzar, crearemos el directorio inicial del proyecto de ejemplo que vamos a utilizar e inicializaremos su fichero de definición de dependencias para que Npm sea capaz de gestionarlo. Este fichero se llama <code>package.json</code> y recoge todas las librerías utilizadas por el proyecto:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir basic</span><br><span class="line">$ <span class="built_in">cd</span> basic</span><br><span class="line">$ npm init</span><br></pre></td></tr></table></figure>

<p>El siguiente paso es activar <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> en nuestro proyecto, para ello ejecutaremos:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --save-dev gulp</span><br></pre></td></tr></table></figure>

<p><em>(Npm acepta el parámetro <code>-D</code> como alias de <code>--save-dev</code>)</em></p>
<p>Finalmente, sólo tenemos que crear el fichero de definición de las tareas de construcción que va a servir para que <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> pueda ejecutar todos los pasos necesarios para la construcción de nuestro proyecto.</p>
<p>Este fichero se debe de llamar <code>gulpfile.js</code> y en los siguientes apartados describiremos sus capacidades en detalle.</p>
<h2 id="Definicion-del-gulpfile-js"><a href="#Definicion-del-gulpfile-js" class="headerlink" title="Definición del gulpfile.js"></a>Definición del gulpfile.js</h2><p>El <code>gulpfile.js</code> más básico que podemos definir es este:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;Gulp works!!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Si ahora ejecutamos el comando <code>gulp</code> dentro del directorio del proyecto … it works!! <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> está ya operativo y construyendo nuestro proyecto:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gulp</span><br><span class="line">[20:26:42] Using gulpfile /opt/devel/workspaces/gulp/basic/gulpfile.js</span><br><span class="line">[20:26:42] Starting <span class="string">&#x27;default&#x27;</span>...</span><br><span class="line">Gulp works!!</span><br><span class="line">[20:26:42] Finished <span class="string">&#x27;default&#x27;</span> after 76 μs</span><br></pre></td></tr></table></figure>

<p>Pasemos a ver como se definen las distintas tareas a realizar dentro de un fichero de construcción de <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a></p>
<h3 id="La-tarea-invocada-por-defecto"><a href="#La-tarea-invocada-por-defecto" class="headerlink" title="La tarea invocada por defecto"></a>La tarea invocada por defecto</h3><p>Por defecto, cuando no le especificamos ninguna tarea a ejecutar, <a target="_blank" rel="noopener" href="http://gulpjs.com/">Gulp</a> ejecutará la marcada como “default”. En cualquier caso, siempre podemos invocar una tarea en concreto o una lista de ellas de la siguiente forma:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gulp &lt;tarea&gt;</span><br><span class="line">$ gulp &lt;tarea1&gt; &lt;tarea2&gt;</span><br></pre></td></tr></table></figure>

<h3 id="Dependencias-entre-tareas"><a href="#Dependencias-entre-tareas" class="headerlink" title="Dependencias entre tareas"></a>Dependencias entre tareas</h3><p>Es muy habitual que la construcción de un proyecto complejo sea la suma de la ejecución de distintas tareas específicas. Así, podemos procesar y minificar el código CSS, nuestros scripts JavaScript o CoffeeScript, optimizar nuestras imágenes o cualquier otra tarea que se nos ocurra.</p>
<p>Para completar este conjunto de tareas, podemos hacer que cuando se ejecute la tarea por defecto, se llame previamente a una lista de tareas de las cuales depende.</p>
<p>Podemos especificar estas definiciones de la siguiente forma, teniendo en cuanta que todas ellas se lanzarán de forma asíncrona:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">&#x27;gulp&#x27;</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;init&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;Inicializamos el proyecto ...&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, [<span class="string">&#x27;init&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&#x27;Gulp works!!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Así, cuando ejecutamos el comando <code>gulp</code>, se ejecutará primero la tarea de inicialización y luego de por defecto, ya que esta depende de <code>init</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[10:27:40] Using gulpfile /opt/devel/workspaces/gulp/task-deps/gulpfile.js</span><br><span class="line">[10:27:40] Starting <span class="string">&#x27;init&#x27;</span>...</span><br><span class="line">Inicializamos el proyecto ...</span><br><span class="line">[10:27:40] Finished <span class="string">&#x27;init&#x27;</span> after 128 μs</span><br><span class="line">[10:27:40] Starting <span class="string">&#x27;default&#x27;</span>...</span><br><span class="line">Gulp works!!</span><br><span class="line">[10:27:40] Finished <span class="string">&#x27;default&#x27;</span> after 38 μs</span><br></pre></td></tr></table></figure>

<p>En un proyecto real, es bastante común que la tarea principal de construcción sea la que lanza el resto de transformaciones a realizar:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&#x27;build&#x27;</span>, [<span class="string">&#x27;css&#x27;</span>, <span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;imgs&#x27;</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="comment">// Acciones a realizar</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><em>(Recuerda que <code>css</code>, <code>js</code> e <code>imgs</code> se lanzarán de forma asíncrona, con lo que no se garantiza el orden de finalización de estas tareas).</em></p>
<h3 id="Lista-de-ficheros-origen-de-una-operacion"><a href="#Lista-de-ficheros-origen-de-una-operacion" class="headerlink" title="Lista de ficheros origen de una operación"></a>Lista de ficheros origen de una operación</h3><p>Antes de poder minificar o revisar el formato de uno o más ficheros de nuestro proyecto, tenemos que ser capaces de definir una expresión que indique sobre qué ficheros trabajar.</p>
<p>Con <code>gulp.src()</code> podremos definir un GLOB sobre el que realizar la operación.</p>
<p>En NodeJS, un GLOB es una expresión textual o vector de las mismas, de match para uno o varios ficheros que pueden ser usados en un pipeline para actuar posteriormente sobre ellos. Algunos ejemplos de GLOB pueden ser:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;style.css&#x27;</span>     // Fichero concreto</span><br><span class="line"><span class="string">&#x27;*.css&#x27;</span>         // Todos los fichero con extensión CSS</span><br><span class="line"><span class="string">&#x27;**/*.js&#x27;</span>       // Todos los fichero JS en cualquier subdirectorio</span><br><span class="line"><span class="string">&#x27;!js/main.js&#x27;</span>   // Exclusión de un fichero concreto</span><br></pre></td></tr></table></figure>

<p>En el siguiente ejemplo, podemos ver una expresión compuesta de varios patrones:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">&#x27;default&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   gulp.src([<span class="string">&#x27;js/**/*.js&#x27;</span>, <span class="string">&#x27;!js/main.js&#x27;</span>])</span><br><span class="line">      .pipe(...)</span><br><span class="line">      ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="Referencias"><a href="#Referencias" class="headerlink" title="Referencias"></a>Referencias</h1><p>Puedes encontrar todos los ejemplos utilizados en este artículo en <a target="_blank" rel="noopener" href="https://github.com/programmeratwork/articles-examples/tree/master/gulp">el repositorio de ejemplos de Programmer At Work</a></p>

      
    </div>
    <footer class="article-footer">
      <img class="article-author-avatar" src="/img/borillo.jpg" />    
      <a target="_blank" rel="noopener" href="https://twitter.com/borillo" class="article-author-name">Ricardo Borillo</a>      
      <span class="article-author-separator">&nbsp;</span>

      <a data-url="http://programmeratwork.com/2014/11/13/Construccion-efectiva-en-JavaScript-con-Gulp-Parte-1/" data-id="ckkr0n9y7000fhw9rcpmrdjyq" class="article-share-link">Comparte</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gulp/" rel="tag">gulp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/11/22/Construccion-efectiva-en-JavaScript-con-Gulp-Parte-2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Siguiente</strong>
      <div class="article-nav-title">
        
          Construcción efectiva con Gulp: Parte 2
        
      </div>
    </a>
  
  
</nav>

  
</article>


        </section>

        
      </div>

      <div>
          <div class="banner">
          </div>
      </div>

      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget inline">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/agile/" rel="tag">agile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/" rel="tag">aws</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/book/" rel="tag">book</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/craftmanship/" rel="tag">craftmanship</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cursos/" rel="tag">cursos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/" rel="tag">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventos/" rel="tag">eventos</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/" rel="tag">gulp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/haskell/" rel="tag">haskell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/languages/" rel="tag">languages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/learn/" rel="tag">learn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mindset/" rel="tag">mindset</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mobile/" rel="tag">mobile</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/" rel="tag">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nvm/" rel="tag">nvm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/programming/" rel="tag">programming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sofware/" rel="tag">sofware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssl/" rel="tag">ssl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testing/" rel="tag">testing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archivo</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">febrero 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">enero 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">septiembre 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">julio 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">diciembre 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">noviembre 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">junio 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">mayo 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">septiembre 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">noviembre 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/07/">julio 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">febrero 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">diciembre 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">noviembre 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recientes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/02/05/Por-que-testeamos-Entrega-sostenible-de-valor/">¿Por qué testeamos? Entrega sostenible de valor</a>
          </li>
        
          <li>
            <a href="/2021/01/05/Implementando-una-cultura-de-testing-Evaluando-el-contexto/">Implementando una cultura de testing: Evaluando el contexto</a>
          </li>
        
          <li>
            <a href="/2020/09/08/Aprediendo-Haskell-Iniciando-el-camino/">Aprediendo Haskell: Iniciando el camino</a>
          </li>
        
          <li>
            <a href="/2019/07/17/Aprendiendo-a-fijar-los-conocimientos/">Aprendiendo a fijar los conocimientos adquiridos</a>
          </li>
        
          <li>
            <a href="/2019/07/02/Pamplona-Software-Crafters-Aprendiendo-a-aprender/">Pamplona Software Crafters: Aprendiendo a aprender</a>
          </li>
        
      </ul>
    </div>
  </div>

  

   
    <!--
    <div>
      <ul class="small-block-grid-2 medium-block-grid-4">
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://devscola.org">
            <img src="/img/devscola.jpg" style="width:7em;" />
          </a>
        </li>
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://agileatwork.es">
            <img src="/img/agileatwork.png" style="width:19em;" />
          </a>
        </li>
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://cursohtml5js.com">
            <img src="/img/html5js.png" style="width:8em;" />
          </a>
        </li>
        <li style="text-align:center;">
          <a target="_blank" rel="noopener" href="http://decharlas.com">
            <img src="/img/decharlas.png" style="width:9em;" />
          </a>
        </li>
      </ul>
    </div>
    -->
</aside>
  
</footer>
    </div>
        
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">inicio</a>
  
    <a href="/cursos" class="mobile-nav-link">cursos</a>
  
    <a href="/archives" class="mobile-nav-link">posts</a>
  
    <a target="_blank" rel="noopener" href="https://www.youtube.com/channel/UC5Crb1lJ9giTnADcsZc0Z8w/videos" class="mobile-nav-link">videos</a>
  
    <a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PLl2j1YxD9uxOTF7XVVo-gb4n8-M02d2J5" class="mobile-nav-link">charlas</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>




<script src="/js/script.js"></script>


  </div>
</body>
</html>